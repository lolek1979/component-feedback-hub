Ahoj, k těm pipelinám. zatím mi to pořád vychází, že použijeme ty současné. CI/CD máme takto:
 
build -> deploy_dev1 -> deploy_test1
 
a nově by bylo takto:
 
build +-> deploy_dev1_we   +-> deploy_test1_we
         |                                     
         +-> deploy_dev1_gwc +->  deploy_test1_gwc
 
Když selže něco v GWC bude WE pokračovat a naopak, nebudou tedy závislé pipeline stages GWC s WE. A rovnou bych tam někde připravil podmínky, které nám v budoucnu umožní odstavit okamžitě WE nebo GWC bez úprav YAML, tedy dát někam do variable groups odpovídajícím těm prostředím  (např. variable group aks-vzp-dev1-we-001) nějakou proměnnou na základě, které ta pipeline tu pomínku vyhodnotí. Podobně i ty do těch CD pipelines  doplnit k WE i GWC podobně na sobě nezávislé.
 
Co ty na to? Případně pak zavolej, a ten návrh prodiskutujeme. Díky moc.
 
ty dnes mas volno? jsi offline
 
už jsem online
 
jsem si tam v pátek večer schválně zapnul offline a zapomněl jsem na to 
 
tam jsem nemnel moc cas o wekendu ale jsem delal na manifestu pro istio gateway and VirtualService na feedback-hub a jsem del do comments TLS 
 
- apiVersion: networking.istio.io/v1alpha3
  kind: Gateway
  metadata:
    name: component-feedback-hub
  spec:
    selector:
      istio: aks-istio-ingressgateway-internal
    servers:
      - port:
          number: 80
          name: http
          protocol: HTTP
        hosts:
          - "api.ndev.az.vzp.cz"
      # - port:
      #     number: 443
      #     name: https
      #     protocol: HTTPS
      #   tls:
      #     mode: SIMPLE
      #     credentialName: api-ingress-tls
      #   hosts:
      #     - "api.ndev.az.vzp.cz"
- apiVersion: networking.istio.io/v1alpha3
  kind: VirtualService
  metadata:
    name: component-feedback-hub
  spec:
    hosts:
      - "api.ndev.az.vzp.cz"
    gateways:
      - component-feedback-hub
    http:
      - match:
          - uri:
              prefix: /feedback-hub/
        rewrite:
          uri: /
        route:
          - destination:
              host: component-feedback-hub
              port:
                number: 8080
      - match:
          - uri:
              exact: /feedback-hub
        rewrite:
          uri: /
        route:
          - destination:
              host: component-feedback-hub
              port:
                number: 8080
 
regex v istio je dostupný ale neni doporučovaný, pipeline jsem pouzil stejne jenom jsem wymazal annotation s ingressu ale po tom co pises tak to skusim neco pridat 
 
a musim pridat nove variables groupu  
 
to je SP co budeme opuzivat na gwc?
 
Konieczny Przemyslaw Bc. (VZP ČR Ústředí)
to je SP co budeme opuzivat na gwc?
vypadá to tak
 
Gateway manifest tam asi bude jen jeden. Per komponenta budou ty VirtualService (jenom budou odkazovat název té Gateway)
 
ok ted to nemame tak musime pridat do templatu 
 
nebo to udelas v istio deploymentu?
 
ted tam neni gateway je tam jenom pro api-moc
 
místo té Gateway pro api-mock tam dáme tu finální. zatím ji klidně můžeš pro testy používat.
 
ok
 